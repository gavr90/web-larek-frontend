# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Документация

1.	Общая информация

Проект выполнен с использованием паттерна MVC.
UML-схема, содержащая описание свойств и методов классов, схему взаимодействия: src/images/UML-cheme_classes.png


2.	Базовые классы

  Класс Api
Отвечает за отправку запросов на сервер
Методы:
- get – получить данные с сервера
- post – отправить данные на сервер
- handleResponse – обработчик ответа сервера

  Класс Compoment<T> 
Абстрактный класс, используется для реализации общих методов, применяемых в классах компонентов представления. Класс является дженериком и принимает в переменной T интерфейсы, реализуемые наследуемыми компонентами представления.
Методы (Инструментарий для работы с DOM в дочерних компонентах):
- toggleClass - переключить класс 
- setText - установить текстовое содержимое
- setDisabled - сменить статус блокировки
- setHidden - скрыть
- setVisible - показать
- render - вернуть корневой DOM-элемент


3.	Описание данных

Описание основных интерфейсов содержится в каталоге src/components/types/index.ts

Интерфейс IItemData 
Описывает состав и типы данных о товарах, которые хранятся на сервере и запрашиваются для отображения карточек товаров и оформления заказов.

Интерфейсы ICartData, ICustomerData 
Описывают данные для формирования заказа. Свойства данных интерфейсов объединены в интерфейсе IOrderData, в котором предусматривается метод sendOrder для отправки на сервер данных о заказе после получения всех данных о заказанных товарах и данных покупателя.

Интерфейс IOrderResultData 
Описывает типы данных об идентификаторе и сумме заказа, получаемые от сервера при успешном оформлении заказа. 

Интерфейс IFormState 
Описывает типы данных для целей валидации форм. 

Описание типов данных для реализации функционала брокера событий описаны в каталоге src/components/base/events.ts
Описание типов данных, определяющих методы запросов на сервер и псевдоним типа ApiListResponse, описывающего данные ответа для операции со списком содержится в каталоге src/components/base/api.ts


4.	Компоненты модели данных

Класс ItemData
Принимает с сервера и хранит данные о товаре, реализует интерфейс IItem.
Методы: 
- getItem – получить с сервера данные о товаре по id;
- getItemsList – получить с сервера массив с данными о товарах

Класс CardData 
Принимает и хранит данные для корзины с товаром, реализует интерфейс ICardData
Методы:
- addItem – добавить данные о товаре в корзине
- removeItem – удалить данные о товаре в корзине
- get totalPrice – геттер, получает значение суммы цен товаров в корзине
- set totalPrice – сеттер, устанавливает новое значение суммы цен товаров в корзине
- get totalItems – геттер, получить значение количества товаров
- set totalItems – сеттер, устанавливает новое значение суммы цен товаров в корзине

Класс CustomerData 
Принимает и хранит данные о покупателе для оформления заказа, реализует интерфейс ICustomerData
Методы:
- setValue – установить значение, полученное из текстового поля (текст выбранной кнопки)

Класс OrderData
Обрабатывает свойства с типами данных интерфейсов ICartData, ICustomerData, реализует интерфейс IOrderData, в котором объединены эти свойства. 
Метод:
- sendOrder – отправка данных о заказе на сервер, получение подтверждения заказа

Класс OrderResultData
Получает и хранит данные подтверждения заказа


5.	Компоненты представления 

Класс PageView
Отображение страницы с каталогом, реализует интерфейс IPageView
Методы:
- set counter – сеттер, обновляет отображаемое значение счетчика корзины (количество товаров);
- set catalog – сеттер, устанавливает и обновляет отображение каталога товаров

Класс ModalView
Отображение верстки и основного функционала модальных окон (кнопка «закрыть»), реализует интерфейс IModalView
- set content – установить, обновить контент для модального окна
- open – открыть модальное окно
- close – закрыть модальное окно
- render – отобразить контент модального окна

Класс ItemView
Отображение данных о товаре, реализует интерфейс IItemView
Методы:
- get id – геттер, получить значение id
- set id – сеттер, установить новое значение id
- get title – геттер, получить значение заголовка
- set title – сеттер, установить новое значение заголовка
- get price - геттер, получить значение цены
- set price – сеттер, установить новое значение цены
- get image – геттер, получить значение ссылки на картинку
- set image – сеттер, установить новое значение ссылки на картинку
- get description – геттер, получить значение описания
- set description - сеттер, установить новое значение описания
- render – отобразить карточку с данными о товаре

Класс CartView
Отображение данных корзины, реализует интерфейс ICartView
- set items – сеттер, установить, обновить список товаров
- set total – установить, обновить сумму цен товаров в корзине

Класс FormView
Абстрактный класс, в нем собраны свойства и методы для отображения элементов форм, реализует интерфейс IFormView
Методы:
- set valid – сеттер, установить, обновить статус валидности формы
- set error - сеттер, установить, обновить сообщение об ошибке
- setValue - установить, обновить значение 
- getValue - получить значение 
- clearValue – очистить поля формы
- selectValue – выбрать элемент со значением из предложенных вариантов

Класс PaymentFormView
Отображение формы с полями метод оплаты и эл.почта. 
Наследует все свойства и методы из класса FormView

Класс ContactsFormView
Отображение формы с полями контактной информации (адрес, телефон)
Наследует все свойства и методы из класса FormView

Класс OrderResult
Отображение сообщения об успешной отправке заказа
Методы:
- get total – геттер, получить значение суммы заказа


6.	Описание событий

Класс EventEmitter 
Обеспечивает работу событий. 
Функции: возможность установить и снять слушателей событий, вызвать слушателей при возникновении события.

События:
- item: select – выбрана карточка товара
- item: buy – товар добавлен в корзину
- item: delete – товар удален из корзины
- modal: open – открыто модальное окно
- modal: close – закрыто модальное окно
- field: change – изменились данные в поле
- formErrors: change – изменилось состояние валидации формы
- cart: open – открыта корзина с заказом
- cart: submit – переход из корзины к заполнению формы
- form: submit – переход к заполнению следующей части формы
- order: submit  - отправлен заказ
