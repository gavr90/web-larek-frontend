# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Документация

1.	Общая информация

Проект выполнен с использованием паттерна MVC.
UML-схема, содержащая описание свойств и методов классов, схему взаимодействия: src/images/UML-cheme_classes.png


2.	Базовые классы

Класс Api
Отвечает за отправку запросов на сервер
Методы:
- get – получить данные с сервера
- post – отправить данные на сервер
- handleResponse – обработчик ответа сервера

Класс Compoment<T> 
Абстрактный класс, используется для реализации общих методов, применяемых в классах компонентов представления. Класс является дженериком и принимает в переменной T интерфейсы, реализуемые наследуемыми компонентами представления.
Методы (Инструментарий для работы с DOM в дочерних компонентах):
- toggleClass - переключить класс
- replaceClass - изменить класс
- setText - установить текстовое содержимое
- setDisabled - сменить статус блокировки
- setHidden - скрыть
- setVisible - показать
- render - вернуть корневой DOM-элемент

Класс EventEmitter 
Обеспечивает работу событий. 
Функции: возможность установить и снять слушателей событий, вызвать слушателей при возникновении события.


3.	Описание данных

Описание основных интерфейсов содержится в каталоге src/components/types/index.ts

Интерфейс LarekApi
Описывает типы ответов с сервера.

Интерфейс IItemData 
Описывает состав и типы данных о товарах, которые хранятся на сервере и запрашиваются для отображения карточек товаров и оформления заказов.

Перечисление ItemCategory
Содержит перечень категорий товаров, получаемых с сервером. 

Тип CategoryMap 
Определяет состав данных в объекте, который описан в файле constants.ts и используется для сопоставления перечня категорий товаров и модификаторов для переопределения стилей карточек товара в зависимости от категории. 

Интерфейсы IPaymentData и IContactsData
Описывают данные, собираемые в формах для формирования заказа. Объединены в типе IFormData.

Интерфейс IOrderData 
Расширяет тип IFormData описанием данных о заказанных товарах, неоходимых для отправки заказа.

Интерфейс IOrderModel
Описывает тип данных объекта, с информацией о заказе, а также типы данных в методах для формирования этого объекта, в т.ч. валидации данных в формах

Интерфейсы ISuccesstData 
Описывает типы данных об идентификаторе и сумме заказа, получаемые от сервера при успешном оформлении заказа. 

Описание типов данных для реализации функционала брокера событий описаны в каталоге src/components/base/events.ts
Описание типов данных, определяющих методы запросов на сервер и псевдоним типа ApiListResponse, описывающего данные ответа для операции со списком содержится в каталоге src/components/base/api.ts


4.	Компоненты модели данных

Класс LarekApi
Отвечает за реализацию запросов на сервер
Методы:
- getItemsList – получить с сервера массив с данными о товарах
- sendOrder – отправка данных о заказе на сервер, получение подтверждения заказа

Класс ItemData
Хранит данные о товаре, реализует интерфейс IItem.
Методы:
- getItem - получить объект с данными о товаре из массива товаров;
- setCatalog - сформировать каталог с товарами;

Класс BasketData  
Принимает и хранит данные для корзины с товаром, реализует интерфейс IBasketData 
Методы: 
- get totalPrice – геттер, получает значение суммы цен товаров в корзине 
- get totalItems – геттер, получить значение количества товаров 
- set totalItems – сеттер, устанавливает новое значение суммы цен товаров в корзине 
- addItem – добавить данные о товаре в корзине 
- removeItem – удалить данные о товаре в корзине 
- clearBasket - удалить данные о всех товарах в корзине

Класс OrderData 
Принимает и хранит данные заказа, реализует интерфейс IOrderModel
Методы: 
- addItems - добавить товары в заказ
- addTotal - добавить сумму товаров в заказ
- setOrderField - установить значение поля
- validateOrder - валидация заказа


5.	Компоненты представления 

Класс PageView
Отображение страницы с каталогом, реализует интерфейс IPageView
Методы:
- set counter – сеттер, обновляет отображаемое значение счетчика корзины (количество товаров);
- set catalog – сеттер, устанавливает и обновляет отображение каталога товаров
- set locked - сеттер, добавляет класс с модификатором locked для блокировки прокрутки страницы

Класс ModalView
Отображение верстки и основного функционала модальных окон (кнопка «закрыть»), реализует интерфейс IModalView
- set content – установить, обновить контент для модального окна
- open – открыть модальное окно
- close – закрыть модальное окно
- render – отобразить контент модального окна

Класс ItemView
Отображение данных о товаре, реализует интерфейс IItemView
Методы:
- get id – геттер, получить значение id
- set title – сеттер, установить значение заголовка
- set price – сеттер, установить значение цены
- set image – сеттер, установить значение ссылки на картинку
- set category - сеттер, установить значение категории
- set description - сеттер, установить значение описания
- get unavalable - геттер, сделать карточку недоступной
- setCategoryStyle – установить стиль в зависимости от категории

Класс BasketView
Отображение данных корзины, реализует интерфейс ICartView
- set items – сеттер, установить, обновить список товаров
- set total – установить, обновить сумму цен товаров в корзине

Класс FormView
Абстрактный класс, в нем собраны свойства и методы для отображения элементов форм, реализует интерфейс IFormView
Методы:
- set valid – сеттер, установить, обновить статус валидности формы
- set errors - сеттер, установить, обновить сообщение об ошибке
- onInputChange - отслеживает изменения в поле формы

Класс PaymentFormView
Отображение формы с полями метод оплаты и эл.почта. Дочерний по отношению к классу FormView
Методы:
- set selected - сеттер, установить значение на основе имеющихся вариантов (по кнопке)
- set address - сеттер, установить значение поля address

Класс ContactsFormView
Отображение формы с полями контактной информации (адрес, телефон). Дочерний по отношению к классу FormView
Методы: 
- set phone - сеттер, установить значение поля phone
- set email - сеттер, установить значение поля email

Класс SuccessView
Отображение сообщения об успешной отправке заказа
Методы:
- get total – геттер, получить значение суммы заказа


6.	Описание событий

События создаются и обрабатываются с помощью класса EventEmitter 
Список событий:
- items:change – изменился каталог
- item:select – выбрана карточка товара
- item:buy – товар добавлен в корзину
- item:delete – товар удален из корзины
- modal:open – открыто модальное окно
- modal:close – закрыто модальное окно
- basket:open - отрыта корзина
- basket: change - изменился состав товаров в корзине
- order:open - открыта форма оплаты
- order:submit - заполнена форма оплаты
- contacts:submit - заполнена форма контактов, отправлен заказ
- /\..*:fieldChange/ - изменилось одно из полей
- formErrors:change – изменилось состояние валидации формы
